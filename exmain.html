<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>신상품 섹션</title>
  <style>
    body {
      font-family: Pretendard, sans-serif;
      margin: 0;
      padding: 0;
    }

    .new-category {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      margin: 3rem 0;
      list-style: none;
      padding: 0;
    }
    .new-category a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
    }
    .new-category a:hover {
      color: #3888dd; /* 강조색 */
    }

    .slider-wrap {
      position: relative;
      width: 100%;
      max-width: 1280px;
      margin: 0 auto;
    }

    .new-track {
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      scroll-snap-type: x mandatory;
    }

    .new-list {
      display: grid;
      grid-auto-flow: column;
      grid-auto-columns: 260px;
      gap: 24px;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .product-box {
      scroll-snap-align: start;
      position: relative;
      text-align: center;
    }

    .product-box img {
      width: 100%;
      border-radius: 8px;
    }

    .product-box figcaption {
      margin-top: 0.75rem;
    }

    .brand {
      font-size: 0.9rem;
      color: #777;
    }

    .name {
      font-size: 1rem;
      margin: 0.25rem 0;
    }

    .price {
      color: #000;
      font-weight: 600;
    }

    .btn-heart {
      position: absolute;
      right: 10px;
      top: 10px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .btn-prev,
    .btn-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
    }

    .btn-prev { left: -40px; }
    .btn-next { right: -40px; }

    .btn-prev[disabled],
    .btn-next[disabled] {
      opacity: 0.3;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <section class="new-section">
    <ul class="new-category">
      <li><a href="#">PERFUME</a></li>
      <li><a href="#">BODY</a></li>
      <li><a href="#">HAIR</a></li>
      <li><a href="#">ETC.</a></li>
    </ul>

    <div class="slider-wrap">
      <button class="btn-prev" aria-label="이전 상품">
        <img src="./img/icons/arrow-left.svg" alt="이전상품보기">
      </button>

      <div class="new-track">
        <ul class="new-list">
          <!-- JS가 여기에 상품 카드 <li>를 자동으로 넣음 -->
        </ul>
      </div>

      <button class="btn-next" aria-label="다음 상품">
        <img src="./img/icons/arrow-right.svg" alt="다음상품보기">
      </button>
    </div>
  </section>

  <script>
    // 1) 상품 데이터
    const products = [
      { id: 1, brand: "Tamburins", name: "탬버린즈 퍼퓸 리미티드 퍼피", price: 250000, image: "./img/product list/new/inscent-tamburins-limited-puppy_M-01.jpg", category: "PERFUME" },
      { id: 2, brand: "Tamburins", name: "탬버린즈 퍼퓸 리미티드 선샤인", price: 250000, image: "./img/product list/new/inscent-tamburins-limited-sunshine_M-02.jpg", category: "PERFUME" },
      { id: 3, brand: "Byredo", name: "바이레도 알토 아스트랄 오 드 퍼퓸", price: 355000, image: "./img/product list/new/inscent-byredo-astral-oud_M.jpg", category: "PERFUME" },
      { id: 4, brand: "Yves Saint", name: "입생로랑 베이비캣 오 드 빠르펭", price: 360000, image: "./img/product list/new/inscent-yves-saint-laurent-babycat_M-04.jpg", category: "PERFUME" },
      { id: 5, brand: "Diptyque", name: "딥티크 플레르 드 뽀 오 드 뚜왈렛", price: 196000, image: "./img/product list/new/inscent-diptyque-fleur-de-peau_M.jpg", category: "PERFUME" },
      { id: 6, brand: "Le Labo", name: "르라보 오스만투스 19", price: 730000, image: "./img/product list/new/inscent-le-labo-osmanthus19_M-06.jpg", category: "PERFUME" },
    ];

    const $category = document.querySelector(".new-category");
    const $track = document.querySelector(".new-track");
    const $list = document.querySelector(".new-list");
    const $prev = document.querySelector(".btn-prev");
    const $next = document.querySelector(".btn-next");

    // 렌더 함수
    function render(items) {
      $list.innerHTML = items.map(item => `
        <li class="product-box" data-id="${item.id}">
          <a href="#">
            <figure>
              <div class="thumb">
                <img src="${item.image}" alt="${item.brand} ${item.name}">
              </div>
              <figcaption>
                <p class="brand">${item.brand}</p>
                <h4 class="name">${item.name}</h4>
                <p class="price">₩${item.price.toLocaleString()}</p>
              </figcaption>
            </figure>
          </a>
          <button type="button" class="btn-heart" aria-label="찜하기">
            <img src="./img/icons/heart-icon.svg" alt="">
          </button>
        </li>
      `).join("");
    }

    // 카테고리 필터 적용
    let currentCategory = "PERFUME";
    function applyCategory(cat) {
      currentCategory = cat;
      const filtered = products.filter(p => p.category === cat);
      render(filtered);
      $track.scrollTo({ left: 0, behavior: "instant" });
      updateArrowState();
    }

    // 카테고리 클릭 이벤트
    $category.addEventListener("click", (e) => {
      const a = e.target.closest("a");
      if (!a) return;
      e.preventDefault();
      applyCategory(a.textContent.trim().toUpperCase());
    });

    // 좌우 스크롤
    function scrollByPage(dir = 1) {
      const delta = $track.clientWidth * 0.9;
      $track.scrollBy({ left: dir * delta, behavior: "smooth" });
    }

    $prev.addEventListener("click", () => scrollByPage(-1));
    $next.addEventListener("click", () => scrollByPage(1));

    // 하트 토글
    $list.addEventListener("click", (e) => {
      const btn = e.target.closest(".btn-heart");
      if (!btn) return;
      btn.classList.toggle("is-active");
    });

    // 버튼 활성/비활성 관리
    function updateArrowState() {
      const max = $track.scrollWidth - $track.clientWidth - 1;
      $prev.disabled = $track.scrollLeft <= 0;
      $next.disabled = $track.scrollLeft >= max;
    }

    $track.addEventListener("scroll", updateArrowState);
    window.addEventListener("resize", updateArrowState);

    // 초기 실행
    applyCategory(currentCategory);
  </script>
</body>
</html>